
.. _get-service-by-domain-name:

Retrieve a service by domain name
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. code::

    GET /admin/domains/{domain_name}


This operation retrieves a service by domain name.

.. note::
   This endpoint is accessible only by users with the ``support`` role in their Cloud Identity service catalog.





This table shows the possible response codes for this operation:


+--------------------------+-------------------------+-------------------------+
|Response Code             |Name                     |Description              |
+==========================+=========================+=========================+
|200                       |OK                       |Success.                 |
+--------------------------+-------------------------+-------------------------+


Request
""""""""""""""""




This table shows the URI parameters for the request:

+--------------------------+-------------------------+-------------------------+
|Name                      |Type                     |Description              |
+==========================+=========================+=========================+
|{domain_name}             |String (*Required*)      |The name of the domain.  |
|                          |                         |For example,             |
|                          |                         |blog.mywebsite.com.      |
+--------------------------+-------------------------+-------------------------+





This operation does not accept a request body.




**Example: Retrieve a service by domain name HTTP request**


.. code::

   GET /v1.0/110011/admin/domains/blog.mywebsite.com HTTP1.1
   Host: global.cdn.api.rackspacecloud.com
   X-Auth-Token: 0f6e9f63600142f0a970911583522217
   Accept: application/json
   Content-type: application/json






Response
""""""""""""""""





This table shows the body parameters for the response:

+----------------------+-------+--------------------------------------------------------+
|Name                  |Type   |Description                                             |
+======================+=======+========================================================+
|\ **id**              |String |Specifies the service ID that represents distributed    |
|                      |       |content. The value is a UUID, such as 96737ae3-cfc1-    |
|                      |       |4c72-be88-5d0e7cc9a3f0, that is generated by the server.|
+----------------------+-------+--------------------------------------------------------+
|\ **project_id**      |String |Specifies the unique identifier for the user. (This is  |
|                      |       |your actual account ID that is returned as part of the  |
|                      |       |authentication service response.)                       |
+----------------------+-------+--------------------------------------------------------+
|\ **name**            |String |Specifies the name of the service.                      |
+----------------------+-------+--------------------------------------------------------+
|\ **domains**         |String |Specifies a list of domains used by users to access     |
|                      |       |their website.                                          |
+----------------------+-------+--------------------------------------------------------+
|\ domains.\           |String |Specifies the domain used to access the assets on their |
|**domain**            |       |website, for which a CNAME is given to the CDN provider.|
+----------------------+-------+--------------------------------------------------------+
|\ **origins**         |String |Specifies a list of origin domains or IP addresses      |
|                      |       |where the original assets are stored.                   |
+----------------------+-------+--------------------------------------------------------+
|\ origins.\           |String |Specifies the URL or IP address to pull origin content  |
|**origin**            |       |from.                                                   |
+----------------------+-------+--------------------------------------------------------+
|origins.\ **port**    |String |Specifies the port used to access the origin. The       |
|                      |       |default is port 80. Note: Rackspace CDN cannot be used  |
|                      |       |with custom ports. Services are required to run on HTTP |
|                      |       |(80) and HTTPS (443) for the origin servers.            |
+----------------------+-------+--------------------------------------------------------+
|origins.\ **ssl**     |String |Uses HTTPS to access the origin. The default is false.  |
+----------------------+-------+--------------------------------------------------------+
|origins.\             |String |Specifies the type for the host header. The default     |
|**hostheadertype**    |       |value is ``domain``. Other valid values are ``origin``  |
|                      |       |and ``custom``.                                         |
+----------------------+-------+--------------------------------------------------------+
|origins.\             |String |Specifies the value to be contained in the host header. |
|**hostheadervalue**   |       |The default value is ``NULL``; this value is assigned   |
|                      |       |only when ``hostheadertype`` is ``domain``. You are     |
|                      |       |required to specify ``hostheadervalue`` only when       |
|                      |       |``hostheadertype`` is specified as ``custom``. If you   |
|                      |       |specify ``hostheadertype`` as ``origin``,               |
|                      |       |``hostheadervalue`` takes the value of the origin       |
|                      |       |domain.                                                 |
+----------------------+-------+--------------------------------------------------------+
|\ **caching**         |String |Specifies the TTL rules for the assets under this       |
|                      |       |service. Supports wildcards for fine grained control.   |
+----------------------+-------+--------------------------------------------------------+
|caching.\ **name**    |String |Specifies the name of this caching rule. Note:          |
|                      |       |'default' is a reserved name used for the default TTL   |
|                      |       |setting.                                                |
+----------------------+-------+--------------------------------------------------------+
|caching.\ **ttl**     |String |Specifies the TTL to apply.                             |
+----------------------+-------+--------------------------------------------------------+
|caching.\ **rules**   |String |Specifies a collection of rules that determine if this  |
|                      |       |TTL should be applied to an asset.                      |
+----------------------+-------+--------------------------------------------------------+
|caching.rules.\       |String |Specifies the name of this rule.                        |
|**name**              |       |                                                        |
+----------------------+-------+--------------------------------------------------------+
|caching.rules.\       |String |Specifies the request URL this rule should match for    |
|**request_url**       |       |this TTL to be used. Regex is supported. Note: The      |
|                      |       |regex is a Perl Compatible Regex (PCRE). For more       |
|                      |       |information about PRCE, see `Regular Expressions (Perl- |
|                      |       |Compatible) <http://php.net/manual/en/book.pcre.php>`__.|
+----------------------+-------+--------------------------------------------------------+
|\ **restrictions**    |String |Specifies the restrictions that define who can access   |
|                      |       |assets (content from the CDN cache).                    |
+----------------------+-------+--------------------------------------------------------+
|restrictions.\        |String |Specifies the name of this restriction.                 |
|**name**              |       |                                                        |
+----------------------+-------+--------------------------------------------------------+
|restrictions.\        |String |Specifies a collection of rules that determine if this  |
|**rules**             |       |TTL should be applied to an asset.                      |
+----------------------+-------+--------------------------------------------------------+
|restrictions.rules.\  |String |Specifies the name of this rule.                        |
|**name**              |       |                                                        |
+----------------------+-------+--------------------------------------------------------+
|restrictions.rules.\  |String |Specifies the http host that requests must come from.   |
|**referrer**          |       |                                                        |
+----------------------+-------+--------------------------------------------------------+
|\ **flavor_id**       |String |Specifies the CDN provider flavor ID to use. For a list |
|                      |       |of flavors, see the operation to list the available     |
|                      |       |flavors.                                                |
+----------------------+-------+--------------------------------------------------------+
|\ **log_delivery**    |String |Specifies whether log delivery to a Cloud Files         |
|                      |       |container is enabled or disabled. For more information  |
|                      |       |about logs, see the ``log_delivery`` parameter          |
|                      |       |description in `Create service                          |
|                      |       |<https://developer.rackspace.com/docs/cdn/v1/developer- |
|                      |       |guide/#create-a-service>`__.                            |
+----------------------+-------+--------------------------------------------------------+
|log_delivery.\        |String |Specifies whether log delivery is enabled (``true``) or |
|**enabled**           |       |disabled (``false``).                                   |
+----------------------+-------+--------------------------------------------------------+
|\ **status**          |String |Specifies the current status of the service.            |
+----------------------+-------+--------------------------------------------------------+
|\ **errors**          |String |Specifies the list of errors that occurred during the   |
|                      |       |previous service action.                                |
+----------------------+-------+--------------------------------------------------------+
|\ **links**           |String |Specifies the self-navigating JSON document paths.      |
+----------------------+-------+--------------------------------------------------------+
|links.\ **href**      |String |Specifies the location to access this resource.         |
+----------------------+-------+--------------------------------------------------------+
|links.\ **rel**       |String |Specifies how the href link provided is related to this |
|                      |       |resource_url.                                           |
+----------------------+-------+--------------------------------------------------------+







**Example: Retrieve a service by domain name JSON response**


.. code::

   HTTP/1.1 200 OK
   Content-Type: application/json


.. code::

   {
       "id": "96737ae3-cfc1-4c72-be88-5d0e7cc9a3f0",
       "name": "mywebsite.com",
       "domains": [
           {
               "domain": "blog.mywebsite.com"
           }
       ],
       "origins": [
           {
               "origin": "mywebsite.com",
               "port": 443,
               "ssl": false,
               "hostheadertype": "origin",
               "hostheadervalue": "mywebsite.com"
           },
           {
               "origin": "77.66.55.44",
               "port": 443,
               "ssl": false,
               "rules": [
                   {
                       "name": "videos",
                       "request_url": "~/videos/*.m3u"
                   }
               ],
               "hostheadertype": "domain",
               "hostheadervalue": null
           }
       ],
       "caching": [
           {
               "name": "default",
               "ttl": 3600
           },
           {
               "name": "home",
               "ttl": 17200,
               "rules": [
                   {
                       "name": "index",
                       "request_url": "/index.htm"
                   }
               ]
           },
           {
               "name": "images",
               "ttl": 12800,
               "rules": [
                   {
                       "name": "images",
                       "request_url": "*.png"
                   }
               ]
           }
       ],
       "restrictions": [
           {
               "name": "website only",
               "rules": [
                   {
                       "name": "mywebsite.com",
                       "referrer": "www.mywebsite.com"
                   }
               ]
           }
       ],
       "flavor_id" : "cdn",
       "log_delivery" : {
           "enabled": true
       },
       "status" : "deployed",
       "errors" : [],
       "links": [
           {
               "href": "https://www.poppycdn.io/v1.0/services/96737ae3-cfc1-4c72-be88-5d0e7cc9a3f0",
               "rel": "self"
           },
           {
               "href": "mywebsite.com.poppycdn.net",
               "rel": "access_url"
           },
           {
               "href": "https://www.poppycdn.io/v1.0/flavors/cdn",
               "rel": "flavor"
           },
           {
               "href" : "https://swiftstorageurl.com/v1.0/.ACCESS_LOGS",
               "rel" : "log_url"
           }
       ]
   }
